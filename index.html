<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô - Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .demo-badge {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #ef4444;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }
        .admin-only {
            display: none;
        }
        .admin-only.show {
            display: block;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
   
    <!-- Login Page -->
    <div id="loginPage" class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-10 h-10 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                    </svg>
                </div>
                <h1 class="text-2xl font-bold text-gray-800 mb-2">‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô</h1>
                <p class="text-gray-600">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                    <input type="text" id="username" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" id="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
                </div>
                
                <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition duration-200">
                    ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                </button>
            </form>
            
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                <p class="text-sm text-gray-600 mb-2"><strong>Demo Accounts:</strong></p>
                <p class="text-xs text-gray-500">üë®‚Äç‚öïÔ∏è ‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•: nurse1 / password123</p>
                <p class="text-xs text-gray-500">üë©‚Äçüíº ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô: admin1 / admin123</p>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="mainSystem" class="hidden">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center space-x-4">
                        <div class="bg-blue-100 w-10 h-10 rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold text-gray-800">‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô</h1>
                            <p class="text-sm text-gray-600" id="userRole">‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm text-gray-600" id="currentDate"></span>
                        <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-200">
                            ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                        </button>
                    </div>
                </div>
            </div>
        </header>

       <!-- Navigation Tabs -->
<div class="py-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- ‡∏Å‡∏£‡∏≠‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π -->
        <div class="bg-blue-200 rounded-xl p-1 flex justify-center w-fit mx-auto shadow-inner">
            <nav class="flex items-center gap-x-1">
                <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô -->
                <button onclick="showTab('search')" id="searchTab" class="tab-button whitespace-nowrap py-2 px-4 text-sm font-medium rounded-lg bg-white text-blue-600 shadow-sm">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</button>
                <button onclick="showTab('register')" id="registerTab" class="tab-button whitespace-nowrap py-2 px-4 text-sm font-medium rounded-lg text-gray-600 hover:bg-white hover:text-blue-600">üìù ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                
                <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô -->
                <button onclick="showTab('appointment')" id="appointmentTab" class="tab-button whitespace-nowrap py-2 px-4 text-sm font-medium rounded-lg text-gray-600 hover:bg-white hover:text-blue-600 admin-only">üìÖ ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢</button>
                <button onclick="showTab('dashboard')" id="dashboardTab" class="tab-button whitespace-nowrap py-2 px-4 text-sm font-medium rounded-lg text-gray-600 hover:bg-white hover:text-blue-600 admin-only">üìä ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</button>
                <button onclick="showTab('hospitals')" id="hospitalsTab" class="tab-button whitespace-nowrap py-2 px-4 text-sm font-medium rounded-lg text-gray-600 hover:bg-white hover:text-blue-600 admin-only">üè• ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ ‡∏£‡∏û.‡∏™‡∏ï.</button>
            </nav>
        </div>
    </div>
</div>

        <!-- Content Area -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Search Patient Tab -->
            <div id="searchContent" class="tab-content">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</label>
                        <div class="flex space-x-4">
                            <input type="text" id="searchId" class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô 13 ‡∏´‡∏•‡∏±‡∏Å" maxlength="13">
                            <button onclick="searchPatient()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                                ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                            </button>
                        </div>
                    </div>

                    <div id="patientInfo" class="hidden">
                        <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-green-800 mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <p class="text-sm text-gray-600">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</p>
                                    <p class="font-medium" id="patientName">‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-600">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</p>
                                    <p class="font-medium" id="patientPhone">081-234-5678</p>
                                </div>
                                <div class="col-span-1 md:col-span-2">
    <h4 class="font-semibold text-gray-800 mb-2">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢</h4>
    <div id="appointmentTableContainer">
        <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ JavaScript ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
    </div>
</div>
                            </div>
                            
                            <div class="mt-6">
                                <h4 class="font-semibold text-gray-800 mb-3">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏â‡∏µ‡∏î‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô</h4>
                                <div class="space-y-2" id="vaccineHistory">
                                    <div class="flex justify-between items-center p-3 bg-white rounded-lg border">
                                        <div>
                                            <p class="font-medium">Pfizer-BioNTech (‡πÄ‡∏Ç‡πá‡∏°‡∏ó‡∏µ‡πà 1)</p>
                                            <p class="text-sm text-gray-600">‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô</p>
                                        </div>
                                        <span class="text-sm text-gray-500">10 ‡∏ò.‡∏Ñ. 2566</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Appointment Registration Tab -->
            <div id="appointmentContent" class="tab-content hidden">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">üìÖ ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô)</h2>
                    
                    <form id="appointmentForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</label>
                                <input type="text" id="appointmentNationalId" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="1234567890123" maxlength="13">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                                <input type="tel" id="appointmentPhone" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="081-234-5678">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠</label>
                                <input type="text" id="appointmentFirstName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                                <input type="text" id="appointmentLastName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
                            </div>
                        </div>



                        <!-- Multi-Date Calendar -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏±‡∏ô)</label>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <div id="multiDateCalendar" class="max-w-md mx-auto bg-white rounded-lg shadow-sm border">
                                    <!-- Calendar will be generated here -->
                                </div>
                                <div class="mt-4 text-center">
                                    <p class="text-sm text-gray-600">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å/‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: <span id="selectedDatesCount">0</span> ‡∏ß‡∏±‡∏ô)</p>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤</label>
                            <select id="appointmentVaccine" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤</option>
                                <option value="Pfizer-BioNTech">Pfizer-BioNTech</option>
                                <option value="AstraZeneca">AstraZeneca</option>
                                <option value="Moderna">Moderna</option>
                                <option value="Sinovac">Sinovac</option>
                                <option value="Sinopharm">Sinopharm</option>
                                <option value="Johnson & Johnson">Johnson & Johnson</option>
                            </select>
                        </div>

                        <div class="flex justify-center">
                            <button type="button" onclick="addSelectedDates()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200">
                                ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                            </button>
                        </div>

                        <div id="appointmentDates" class="space-y-3"></div>

                        <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition duration-200">
                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢
                        </button>
                    </form>
                </div>
            </div>

            <!-- Register Patient Tab -->
            <div id="registerContent" class="tab-content hidden">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">üìù ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2>
                    
                    <form id="registerForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠</label>
                                <input type="text" id="firstName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                                <input type="text" id="lastName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                                <input type="tel" id="phone" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="081-234-5678">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</label>
                                <input type="text" id="nationalId" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="1234567890123" maxlength="13">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏â‡∏µ‡∏î</label>
                            <select id="hospital" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏â‡∏µ‡∏î</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡πÄ‡∏¢‡πá‡∏ô ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô">‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡πÄ‡∏¢‡πá‡∏ô ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡πÇ‡∏Ç‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 03 ‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô">‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡πÇ‡∏Ç‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 03 ‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏î‡∏µ ‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏£‡∏∏‡∏à‡∏π‡∏î ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 03 ‡∏ö‡∏≤‡∏á‡∏î‡∏µ">‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏î‡∏µ ‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏£‡∏∏‡∏à‡∏π‡∏î ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 03 ‡∏ö‡∏≤‡∏á‡∏î‡∏µ</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏î‡∏µ ‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏Å‡πÅ‡∏ï‡∏£‡∏Å ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 05 ‡∏ö‡∏≤‡∏á‡∏î‡∏µ">‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏î‡∏µ ‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏Å‡πÅ‡∏ï‡∏£‡∏Å ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 05 ‡∏ö‡∏≤‡∏á‡∏î‡∏µ</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á ‡∏ö‡πâ‡∏≤‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏ô‡∏≤‡∏ß‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á">‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á ‡∏ö‡πâ‡∏≤‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏ô‡∏≤‡∏ß‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Ñ‡∏•‡∏≠‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 05 ‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á">‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Ñ‡∏•‡∏≠‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 05 ‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö ‡∏ö‡πâ‡∏≤‡∏ô‡∏ñ‡∏ô‡∏ô‡πÅ‡∏û‡∏£‡∏Å ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 04 ‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö">‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö ‡∏ö‡πâ‡∏≤‡∏ô‡∏ñ‡∏ô‡∏ô‡πÅ‡∏û‡∏£‡∏Å ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 04 ‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏õ‡∏£‡∏∑‡∏≠ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 08 ‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö">‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏õ‡∏£‡∏∑‡∏≠ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 08 ‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏Ç‡∏≤‡∏ß ‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏ô‡∏ó‡∏±‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 07 ‡πÄ‡∏Ç‡∏≤‡∏Ç‡∏≤‡∏ß">‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏Ç‡∏≤‡∏ß ‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏ô‡∏ó‡∏±‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 07 ‡πÄ‡∏Ç‡∏≤‡∏Ç‡∏≤‡∏ß</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏õ‡∏π‡∏ô ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡∏≤‡∏õ‡∏π‡∏ô ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡πÄ‡∏Ç‡∏≤‡∏õ‡∏π‡∏ô">‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏õ‡∏π‡∏ô ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡∏≤‡∏õ‡∏π‡∏ô ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡πÄ‡∏Ç‡∏≤‡∏õ‡∏π‡∏ô</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏õ‡∏≤‡∏Å‡πÅ‡∏à‡πà‡∏° ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏´‡∏≠‡∏¢ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 03 ‡∏õ‡∏≤‡∏Å‡πÅ‡∏à‡πà‡∏°">‡∏£‡∏û.‡∏™‡∏ï.‡∏õ‡∏≤‡∏Å‡πÅ‡∏à‡πà‡∏° ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏´‡∏≠‡∏¢ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 03 ‡∏õ‡∏≤‡∏Å‡πÅ‡∏à‡πà‡∏°</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏õ‡∏≤‡∏Å‡∏Ñ‡∏° ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏Ç‡∏µ‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏î ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏õ‡∏≤‡∏Å‡∏Ñ‡∏°">‡∏£‡∏û.‡∏™‡∏ï.‡∏õ‡∏≤‡∏Å‡∏Ñ‡∏° ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏Ç‡∏µ‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏î ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏õ‡∏≤‡∏Å‡∏Ñ‡∏°</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏ó‡πà‡∏≤‡∏á‡∏¥‡πâ‡∏ß ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏¥‡∏ô‡∏á‡∏≠‡∏° ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 07 ‡∏ó‡πà‡∏≤‡∏á‡∏¥‡πâ‡∏ß">‡∏£‡∏û.‡∏™‡∏ï.‡∏ó‡πà‡∏≤‡∏á‡∏¥‡πâ‡∏ß ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏¥‡∏ô‡∏á‡∏≠‡∏° ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 07 ‡∏ó‡πà‡∏≤‡∏á‡∏¥‡πâ‡∏ß</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏•‡∏≥‡∏†‡∏π‡∏£‡∏≤ ‡∏ö‡πâ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 01 ‡∏•‡∏≥‡∏†‡∏π‡∏£‡∏≤">‡∏£‡∏û.‡∏™‡∏ï.‡∏•‡∏≥‡∏†‡∏π‡∏£‡∏≤ ‡∏ö‡πâ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 01 ‡∏•‡∏≥‡∏†‡∏π‡∏£‡∏≤</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏ô‡∏≤‡∏ß‡∏á ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏´‡∏°‡∏≠ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 01 ‡∏ô‡∏≤‡∏ß‡∏á">‡∏£‡∏û.‡∏™‡∏ï.‡∏ô‡∏≤‡∏ß‡∏á ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏´‡∏°‡∏≠ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 01 ‡∏ô‡∏≤‡∏ß‡∏á</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏ô‡∏≤‡∏ß‡∏á ‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏û‡∏ò‡∏¥‡πå‡πÇ‡∏ó‡∏ô ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 06 ‡∏ô‡∏≤‡∏ß‡∏á">‡∏£‡∏û.‡∏™‡∏ï.‡∏ô‡∏≤‡∏ß‡∏á ‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏û‡∏ò‡∏¥‡πå‡πÇ‡∏ó‡∏ô ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 06 ‡∏ô‡∏≤‡∏ß‡∏á</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡∏≤‡∏á ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡∏≤‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡∏≤‡∏á">‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡∏≤‡∏á ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡∏≤‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡∏≤‡∏á</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡πÉ‡∏ô‡πÄ‡∏ï‡∏≤ ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏±‡∏î ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 01 ‡πÉ‡∏ô‡πÄ‡∏ï‡∏≤">‡∏£‡∏û.‡∏™‡∏ï.‡πÉ‡∏ô‡πÄ‡∏ï‡∏≤ ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏±‡∏î ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 01 ‡πÉ‡∏ô‡πÄ‡∏ï‡∏≤</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏ó‡∏∏‡πà‡∏á‡∏ï‡πà‡∏≠ ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡∏•‡∏∂‡∏Å ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 07 ‡∏ó‡∏∏‡πà‡∏á‡∏ï‡πà‡∏≠">‡∏£‡∏û.‡∏™‡∏ï.‡∏ó‡∏∏‡πà‡∏á‡∏ï‡πà‡∏≠ ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡∏•‡∏∂‡∏Å ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 07 ‡∏ó‡∏∏‡πà‡∏á‡∏ï‡πà‡∏≠</option>
                                <option value="‡∏£‡∏û.‡∏™‡∏ï.‡∏ß‡∏±‡∏á‡∏Ñ‡∏µ‡∏£‡∏µ ‡∏ö‡πâ‡∏≤‡∏ô‡∏ß‡∏±‡∏á‡∏•‡∏≥‡πÉ‡∏ï‡πâ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02">‡∏£‡∏û.‡∏™‡∏ï.‡∏ß‡∏±‡∏á‡∏Ñ‡∏µ‡∏£‡∏µ ‡∏ö‡πâ‡∏≤‡∏ô‡∏ß‡∏±‡∏á‡∏•‡∏≥‡πÉ‡∏ï‡πâ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02</option>
                            </select>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏â‡∏µ‡∏î</label>
                                <input type="date" id="vaccineDate" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤</label>
                                <select id="vaccineName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤</option>
                                    <option value="Pfizer-BioNTech">Pfizer-BioNTech</option>
                                    <option value="AstraZeneca">AstraZeneca</option>
                                    <option value="Moderna">Moderna</option>
                                    <option value="Sinovac">Sinovac</option>
                                    <option value="Sinopharm">Sinopharm</option>
                                    <option value="Johnson & Johnson">Johnson & Johnson</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏â‡∏µ‡∏î</label>
                                <select id="injectionSite" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏â‡∏µ‡∏î</option>
                                    <option value="‡πÅ‡∏Ç‡∏ô‡∏ã‡πâ‡∏≤‡∏¢">‡πÅ‡∏Ç‡∏ô‡∏ã‡πâ‡∏≤‡∏¢</option>
                                    <option value="‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏ß‡∏≤">‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏ß‡∏≤</option>
                                    <option value="‡∏ï‡πâ‡∏ô‡∏Ç‡∏≤‡∏ã‡πâ‡∏≤‡∏¢">‡∏ï‡πâ‡∏ô‡∏Ç‡∏≤‡∏ã‡πâ‡∏≤‡∏¢</option>
                                    <option value="‡∏ï‡πâ‡∏ô‡∏Ç‡∏≤‡∏Ç‡∏ß‡∏≤">‡∏ï‡πâ‡∏ô‡∏Ç‡∏≤‡∏Ç‡∏ß‡∏≤</option>
                                </select>
                            </div>
                        </div>

                        <div class="flex justify-center">
                            <button type="button" onclick="addVaccineDate()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200">
                                ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏â‡∏µ‡∏î
                            </button>
                        </div>

                        <div id="vaccineDates" class="space-y-3"></div>

                        <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition duration-200">
                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        </button>
                    </form>
                </div>
            </div>

            <!-- Dashboard Tab -->
            <div id="dashboardContent" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-gray-800 mb-6">üìä ‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
                        <div class="space-y-4" id="todayAppointments">
                            <div class="flex justify-between items-center p-4 bg-blue-50 rounded-lg border border-blue-200">
                                <div>
                                    <p class="font-medium text-blue-800">‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ</p>
                                    <p class="text-sm text-blue-600">081-234-5678</p>
                                    <p class="text-sm text-gray-600">Pfizer-BioNTech (‡πÄ‡∏Ç‡πá‡∏°‡∏ó‡∏µ‡πà 2)</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-500">09:00 ‡∏ô.</p>
                                    <span class="inline-block px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">‡∏£‡∏≠‡∏â‡∏µ‡∏î</span>
                                </div>
                            </div>
                            
                            <div class="flex justify-between items-center p-4 bg-green-50 rounded-lg border border-green-200">
                                <div>
                                    <p class="font-medium text-green-800">‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏°‡∏≤‡∏•‡∏µ ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°</p>
                                    <p class="text-sm text-green-600">089-876-5432</p>
                                    <p class="text-sm text-gray-600">AstraZeneca (‡πÄ‡∏Ç‡πá‡∏°‡∏ó‡∏µ‡πà 1)</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-500">10:30 ‡∏ô.</p>
                                    <span class="inline-block px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">‡∏â‡∏µ‡∏î‡πÅ‡∏•‡πâ‡∏ß</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-gray-800 mb-6">üìà ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h2>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="text-center p-4 bg-blue-50 rounded-lg">
                                <p class="text-3xl font-bold text-blue-600">12</p>
                                <p class="text-sm text-gray-600">‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                            </div>
                            <div class="text-center p-4 bg-green-50 rounded-lg">
                                <p class="text-3xl font-bold text-green-600">8</p>
                                <p class="text-sm text-gray-600">‡∏â‡∏µ‡∏î‡πÅ‡∏•‡πâ‡∏ß</p>
                            </div>
                            <div class="text-center p-4 bg-yellow-50 rounded-lg">
                                <p class="text-3xl font-bold text-yellow-600">4</p>
                                <p class="text-sm text-gray-600">‡∏£‡∏≠‡∏â‡∏µ‡∏î</p>
                            </div>
                            <div class="text-center p-4 bg-red-50 rounded-lg">
                                <p class="text-3xl font-bold text-red-600">0</p>
                                <p class="text-sm text-gray-600">‡πÑ‡∏°‡πà‡∏°‡∏≤</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hospitals Tab -->
            <div id="hospitalsContent" class="tab-content hidden">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">üè• ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ï‡∏≥‡∏ö‡∏•</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">1. ‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡πÄ‡∏¢‡πá‡∏ô ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">2. ‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡πÇ‡∏Ç‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 03 ‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">3. ‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏î‡∏µ</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏£‡∏∏‡∏à‡∏π‡∏î ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 03 ‡∏ö‡∏≤‡∏á‡∏î‡∏µ</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">4. ‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏î‡∏µ</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏Å‡πÅ‡∏ï‡∏£‡∏Å ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 05 ‡∏ö‡∏≤‡∏á‡∏î‡∏µ</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">5. ‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏ô‡∏≤‡∏ß‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">6. ‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Ñ‡∏•‡∏≠‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 05 ‡∏ö‡∏≤‡∏á‡∏Å‡∏∏‡πâ‡∏á</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">7. ‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏ñ‡∏ô‡∏ô‡πÅ‡∏û‡∏£‡∏Å ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 04 ‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">8. ‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏õ‡∏£‡∏∑‡∏≠ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 08 ‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≠‡∏ö</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">9. ‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏Ç‡∏≤‡∏ß</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏ô‡∏ó‡∏±‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 07 ‡πÄ‡∏Ç‡∏≤‡∏Ç‡∏≤‡∏ß</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">10. ‡∏£‡∏û.‡∏™‡∏ï.‡πÄ‡∏Ç‡∏≤‡∏õ‡∏π‡∏ô</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡∏≤‡∏õ‡∏π‡∏ô ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡πÄ‡∏Ç‡∏≤‡∏õ‡∏π‡∏ô</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">11. ‡∏£‡∏û.‡∏™‡∏ï.‡∏õ‡∏≤‡∏Å‡πÅ‡∏à‡πà‡∏°</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏´‡∏≠‡∏¢ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 03 ‡∏õ‡∏≤‡∏Å‡πÅ‡∏à‡πà‡∏°</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">12. ‡∏£‡∏û.‡∏™‡∏ï.‡∏õ‡∏≤‡∏Å‡∏Ñ‡∏°</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏Ç‡∏µ‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏î ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏õ‡∏≤‡∏Å‡∏Ñ‡∏°</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">13. ‡∏£‡∏û.‡∏™‡∏ï.‡∏ó‡πà‡∏≤‡∏á‡∏¥‡πâ‡∏ß</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏¥‡∏ô‡∏á‡∏≠‡∏° ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 07 ‡∏ó‡πà‡∏≤‡∏á‡∏¥‡πâ‡∏ß</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">14. ‡∏£‡∏û.‡∏™‡∏ï.‡∏•‡∏≥‡∏†‡∏π‡∏£‡∏≤</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 01 ‡∏•‡∏≥‡∏†‡∏π‡∏£‡∏≤</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">15. ‡∏£‡∏û.‡∏™‡∏ï.‡∏ô‡∏≤‡∏ß‡∏á</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏´‡∏°‡∏≠ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 01 ‡∏ô‡∏≤‡∏ß‡∏á</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">16. ‡∏£‡∏û.‡∏™‡∏ï.‡∏ô‡∏≤‡∏ß‡∏á</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏û‡∏ò‡∏¥‡πå‡πÇ‡∏ó‡∏ô ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 06 ‡∏ô‡∏≤‡∏ß‡∏á</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">17. ‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡∏≤‡∏á</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡∏≤‡∏á ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02 ‡∏´‡πâ‡∏ß‡∏¢‡∏ô‡∏≤‡∏á</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">18. ‡∏£‡∏û.‡∏™‡∏ï.‡πÉ‡∏ô‡πÄ‡∏ï‡∏≤</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏±‡∏î ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 01 ‡πÉ‡∏ô‡πÄ‡∏ï‡∏≤</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">19. ‡∏£‡∏û.‡∏™‡∏ï.‡∏ó‡∏∏‡πà‡∏á‡∏ï‡πà‡∏≠</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡∏•‡∏∂‡∏Å ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 07 ‡∏ó‡∏∏‡πà‡∏á‡∏ï‡πà‡∏≠</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <h3 class="font-semibold text-gray-800">20. ‡∏£‡∏û.‡∏™‡∏ï.‡∏ß‡∏±‡∏á‡∏Ñ‡∏µ‡∏£‡∏µ</h3>
                            <p class="text-sm text-gray-600">‡∏ö‡πâ‡∏≤‡∏ô‡∏ß‡∏±‡∏á‡∏•‡∏≥‡πÉ‡∏ï‡πâ ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà 02</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Sample data
        let patients = [
            {
                id: '1234567890123',
                name: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ',
                phone: '081-234-5678',
                appointments: [
                    { date: '2024-01-15', vaccine: 'Pfizer-BioNTech', hospital: '‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô' },
                    { date: '2024-02-20', vaccine: 'Pfizer-BioNTech', hospital: '‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô' },
                    { date: '2024-03-25', vaccine: 'Pfizer-BioNTech', hospital: '‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô' }
                ],
                history: [
                    { date: '2023-12-10', vaccine: 'Pfizer-BioNTech (‡πÄ‡∏Ç‡πá‡∏°‡∏ó‡∏µ‡πà 1)', hospital: '‡∏£‡∏û.‡∏™‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πà‡∏ô' }
                ]
            },
            {
                id: '9876543210987',
                name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏°‡∏≤‡∏•‡∏µ ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°',
                phone: '089-876-5432',
                appointments: [
                    { date: '2024-02-20', vaccine: 'AstraZeneca', hospital: '‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏î‡∏µ' }
                ],
                history: [
                    { date: '2023-11-15', vaccine: 'AstraZeneca (‡πÄ‡∏Ç‡πá‡∏°‡∏ó‡∏µ‡πà 1)', hospital: '‡∏£‡∏û.‡∏™‡∏ï.‡∏ö‡∏≤‡∏á‡∏î‡∏µ' }
                ]
            }
        ];


        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxCzjoYm1x4x9O8HYUW5yDsYqjuJwamw-v-sKiN1Vp_KHL3ckLYIxdEklZGNV7U-rEr/exec';
        let vaccineDatesArray = [];
        let appointmentDatesArray = [];
        let currentUserRole = '';
        let selectedDates = [];
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();

        // Function to format Thai date properly
       /**
 * Formats a date string into a proper Thai date with a B.E. year.
 * -- MODIFIED: Prevents double-adding 543 to the year.
 */
function formatThaiDate(dateStr) {
    if (!dateStr) return '';
    const date = new Date(dateStr);
    
    // Check if the date is valid
    if (isNaN(date.getTime())) {
        return '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
    }

    const year = date.getFullYear();
    
    // **[FIX]** Check if the year is already a Buddhist Era year.
    // If it is, use it directly. If not (it's A.D.), then add 543.
    const thaiYear = year > 2500 ? year : year + 543;

    const thaiMonths = ['‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå', '‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°', '‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô', '‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°', '‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô', '‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°', '‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô', '‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°', '‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô', '‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°'];
    
    return `${date.getDate()} ${thaiMonths[date.getMonth()]} ${thaiYear}`;
}

        // Initialize
       // -- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô --
document.addEventListener('DOMContentLoaded', function() {
    const loggedInUserRole = sessionStorage.getItem('userRole');
    if (loggedInUserRole) {
        console.log('‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô session:', loggedInUserRole);
        showMainSystem(loggedInUserRole);
    }
    updateCurrentDate();
    generateCalendar();
});

        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('th-TH', options);
        }

        // Login functionality
       // -- ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà event listener ‡∏Ç‡∏≠‡∏á loginForm ‡πÄ‡∏î‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ --
document.getElementById('loginForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const loginButton = this.querySelector('button[type="submit"]');
    const originalButtonText = loginButton.textContent;

    loginButton.disabled = true;
    loginButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...';

    try {
        const response = await fetch(GOOGLE_SCRIPT_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'text/plain' },
            body: JSON.stringify({
                action: 'login',
                username: username,
                password: password
            })
        });
        
        const result = await response.json();

        if (result.success) {
            // **‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**
            const role = result.role;
            sessionStorage.setItem('userRole', role); // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å session
            showMainSystem(role); // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
        } else {
             alert('‚ùå ' + (result.message || result.error || '‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'));
        }

    } catch (error) {
        console.error('Login Error:', error);
        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå');
    } finally {
        loginButton.disabled = false;
        loginButton.textContent = originalButtonText;
    }
});


// -- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô logout --
function showMainSystem(role) {
    // ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
    document.getElementById('loginPage').classList.add('hidden');
    document.getElementById('mainSystem').classList.remove('hidden');
    
    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ role ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ó‡∏µ‡πà header
    currentUserRole = role;
    document.getElementById('userRole').textContent = role;
    
    // ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏ô‡∏π admin-only ‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    document.querySelectorAll('.admin-only').forEach(el => el.classList.remove('show'));

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
    if (role === '‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô') {
        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏ô‡∏π
        document.querySelectorAll('.admin-only').forEach(el => el.classList.add('show'));
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
        showTab('search'); 
    } else if (role === '‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•') {
        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏°‡∏ô‡∏π admin-only ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÇ‡∏î‡∏¢ CSS
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
        showTab('search');
    }
}

function logout() {
    // **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:** ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• sessionStorage
    sessionStorage.removeItem('userRole');

    // ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ login
    document.getElementById('loginPage').classList.remove('hidden');
    document.getElementById('mainSystem').classList.add('hidden');
    document.getElementById('loginForm').reset();

    document.querySelectorAll('.admin-only').forEach(el => el.classList.remove('show'));
    currentUserRole = '';
}

        // Tab functionality
function showTab(tabName) {
    // ‡∏ã‡πà‡∏≠‡∏ô content ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.add('hidden');
    });
    
    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ "‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å"
    document.querySelectorAll('.tab-button').forEach(tab => {
        tab.classList.remove('bg-white', 'text-blue-600', 'shadow-sm');
        tab.classList.add('text-gray-600');
    });
    
    // ‡πÅ‡∏™‡∏î‡∏á content ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
    document.getElementById(tabName + 'Content').classList.remove('hidden');
    
    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
    const activeTab = document.getElementById(tabName + 'Tab');
    activeTab.classList.remove('text-gray-600');
    activeTab.classList.add('bg-white', 'text-blue-600', 'shadow-sm');
}

        // Search patient function (‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÉ‡∏´‡∏°‡πà - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Sheets)
        async function searchPatient() {
            const searchId = document.getElementById('searchId').value.trim();
            
            if (!searchId) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô');
                return;
            }
            
            const searchButton = document.querySelector('#searchContent button');
            const originalText = searchButton.textContent;
            searchButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...';
            searchButton.disabled = true;
            
            try {
                // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å Google Sheets ‡∏Å‡πà‡∏≠‡∏ô
                const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxCzjoYm1x4x9O8HYUW5yDsYqjuJwamw-v-sKiN1Vp_KHL3ckLYIxdEklZGNV7U-rEr/exec';
                
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'text/plain',
                    },
                    body: JSON.stringify({
                        action: 'searchPatient',
                        nationalId: searchId
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Google Sheets
                    console.log('Found patient in Google Sheets:', result.data);
                    displayPatientInfo(result.data);
                } else {
                    // ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÉ‡∏ô Google Sheets ‡πÉ‡∏´‡πâ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
                    console.log('Not found in Google Sheets, searching sample data...');
                    searchFromSampleData(searchId);
                }
                
            } catch (error) {
                console.error('Error searching from Google Sheets:', error);
                // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡πÉ‡∏´‡πâ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
                searchFromSampleData(searchId);
            } finally {
                searchButton.textContent = originalText;
                searchButton.disabled = false;
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
        function searchFromSampleData(searchId) {
            let foundPatient = patients.find(p => p.id === searchId);
            
            // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠‡πÉ‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÉ‡∏´‡πâ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
            if (!foundPatient && window.registeredAppointments) {
                const appointmentRecord = window.registeredAppointments.find(app => app.nationalId === searchId);
                if (appointmentRecord) {
                    foundPatient = {
                        id: appointmentRecord.nationalId,
                        name: `${appointmentRecord.firstName} ${appointmentRecord.lastName}`,
                        phone: appointmentRecord.phone,
                        appointments: appointmentRecord.appointments.map(app => ({
                            date: app.date,
                            vaccine: app.vaccine,
                            hospital: '‡∏£‡∏û.‡∏™‡∏ï.‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô'
                        })),
                        history: []
                    };
                }
            }
            
            if (foundPatient) {
                console.log('Found patient in sample data:', foundPatient);
                displayPatientInfo(foundPatient);
            } else {
                console.log('Patient not found anywhere');
                alert('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢\n\nüí° ‡∏•‡∏≠‡∏á‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô: 1234567890123\n(‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Demo)');
                document.getElementById('patientInfo').classList.add('hidden');
            }
        }





   function displayPatientInfo(patientData) {
    document.getElementById('patientName').textContent = patientData.name;
    document.getElementById('patientPhone').textContent = patientData.phone;

    // --- 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ---
    const appointmentTableContainer = document.getElementById('appointmentTableContainer');
    appointmentTableContainer.innerHTML = ''; // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤

    // [FIX] ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô YYYY-MM-DD ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô UTC
    const getUTCDateString = (dateInput) => {
        if (!dateInput) return null;
        const d = new Date(dateInput);
        if (isNaN(d.getTime())) return null;
        
        const year = d.getUTCFullYear();
        const month = String(d.getUTCMonth() + 1).padStart(2, '0');
        const day = String(d.getUTCDate()).padStart(2, '0');
        
        return `${year}-${month}-${day}`;
    };

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á Set ‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏â‡∏µ‡∏î‡∏à‡∏£‡∏¥‡∏á (‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö YYYY-MM-DD) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß
    const vaccinationDates = new Set(
        (patientData.history || []).map(record => getUTCDateString(record.date)).filter(Boolean)
    );

    if (patientData.appointments && patientData.appointments.length > 0) {
        let tableHtml = `
            <div class="overflow-x-auto rounded-lg border">
                <table class="min-w-full bg-white">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î (‡∏û.‡∏®.)</th>
                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤</th>
                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
        `;

        const today = new Date();
        today.setHours(0, 0, 0, 0);

        // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏ñ‡∏ß‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢
        patientData.appointments.forEach(app => {
            const appDate = new Date(app.date);
            const appDateString = getUTCDateString(app.date); // ‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà

            let statusText = '';
            let statusColorClass = '';

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏î
            if (vaccinationDates.has(appDateString)) {
                statusText = '‡∏â‡∏µ‡∏î‡πÅ‡∏•‡πâ‡∏ß';
                statusColorClass = 'bg-green-100 text-green-800';
            } else if (appDate < today) {
                statusText = '‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏ô‡∏±‡∏î';
                statusColorClass = 'bg-red-100 text-red-800';
            } else {
                statusText = '‡∏£‡∏≠‡∏â‡∏µ‡∏î';
                statusColorClass = 'bg-gray-100 text-gray-800';
            }

            tableHtml += `
                <tr>
                    <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-700">${formatThaiDate(appDate)}</td>
                    <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-700">${app.vaccine}</td>
                    <td class="px-4 py-2 whitespace-nowrap text-sm">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusColorClass}">
                            ${statusText}
                        </span>
                    </td>
                </tr>
            `;
        });

        tableHtml += `</tbody></table></div>`;
        appointmentTableContainer.innerHTML = tableHtml;
    } else {
        appointmentTableContainer.innerHTML = '<p class="text-gray-500 text-center py-4">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢</p>';
    }

    // --- 2. ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏â‡∏µ‡∏î (‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°) ---
    const historyContainer = document.getElementById('vaccineHistory');
    historyContainer.innerHTML = '';
    if (patientData.history && patientData.history.length > 0) {
         patientData.history.forEach(record => {
            const historyItem = document.createElement('div');
            historyItem.className = 'flex justify-between items-center p-3 bg-white rounded-lg border';
            historyItem.innerHTML = `
                <div>
                    <p class="font-semibold text-gray-800">${record.vaccineName || 'N/A'}</p>
                    <p class="text-sm text-gray-600">${record.hospital || 'N/A'}</p>
                </div>
                <span class="text-sm text-gray-500">${formatThaiDate(record.date)}</span>
            `;
            historyContainer.appendChild(historyItem);
        });
    } else {
        historyContainer.innerHTML = '<p class="text-gray-500 text-center py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏â‡∏µ‡∏î‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô</p>';
    }
    
    document.getElementById('patientInfo').classList.remove('hidden');
}





        // Add vaccine date
        function addVaccineDate() {
            const dateInput = document.getElementById('vaccineDate');
            const vaccineInput = document.getElementById('vaccineName');
            const siteInput = document.getElementById('injectionSite');
            
            const date = dateInput.value;
            const vaccine = vaccineInput.value;
            const site = siteInput.value;
            
            if (date && vaccine && site) {
                const vaccineData = {
                    date: date,
                    vaccine: vaccine,
                    site: site
                };
                
                vaccineDatesArray.push(vaccineData);
                updateVaccineDatesDisplay();
                
                // Clear inputs
                dateInput.value = '';
                vaccineInput.value = '';
                siteInput.value = '';
            } else {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
            }
        }

        function updateVaccineDatesDisplay() {
            const container = document.getElementById('vaccineDates');
            container.innerHTML = '';
            
            vaccineDatesArray.forEach((vaccineData, index) => {
                const dateDiv = document.createElement('div');
                dateDiv.className = 'flex items-center space-x-4 p-4 bg-blue-50 rounded-lg border border-blue-200';
                dateDiv.innerHTML = `
                    <div class="flex-1">
                        <p class="font-medium text-blue-800">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏â‡∏µ‡∏î: ${formatThaiDate(vaccineData.date)}</p>
                        <p class="text-sm text-blue-600">‡∏¢‡∏≤: ${vaccineData.vaccine}</p>
                        <p class="text-sm text-blue-600">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏â‡∏µ‡∏î: ${vaccineData.site}</p>
                    </div>
                    <button onclick="removeVaccineDate(${index})" class="bg-red-500 text-white px-3 py-2 rounded-lg hover:bg-red-600 transition duration-200">
                        ‡∏•‡∏ö
                    </button>
                `;
                container.appendChild(dateDiv);
            });
        }

        function removeVaccineDate(index) {
            vaccineDatesArray.splice(index, 1);
            updateVaccineDatesDisplay();
        }

        // Generate Calendar
        function generateCalendar() {
            const calendar = document.getElementById('multiDateCalendar');
            const monthNames = ['‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå', '‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°', '‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô', '‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°', '‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô',
                              '‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°', '‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô', '‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°', '‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô', '‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°'];
            const dayNames = ['‡∏≠‡∏≤', '‡∏à', '‡∏≠', '‡∏û', '‡∏û‡∏§', '‡∏®', '‡∏™'];
            
            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            const startDate = firstDay.getDay();
            const daysInMonth = lastDay.getDate();
            
            let calendarHTML = `
                <div class="p-4">
                    <div class="flex justify-between items-center mb-4">
                        <button onclick="previousMonth()" class="p-2 hover:bg-gray-100 rounded-lg">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <h3 class="text-lg font-semibold">${monthNames[currentMonth]} ${currentYear}</h3>
                        <button onclick="nextMonth()" class="p-2 hover:bg-gray-100 rounded-lg">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="grid grid-cols-7 gap-1 mb-2">
            `;
            
            // Day headers
            dayNames.forEach(day => {
                calendarHTML += `<div class="text-center text-sm font-medium text-gray-600 p-2">${day}</div>`;
            });
            
            calendarHTML += `</div><div class="grid grid-cols-7 gap-1">`;
            
            // Empty cells for days before month starts
            for (let i = 0; i < startDate; i++) {
                calendarHTML += `<div class="p-2"></div>`;
            }
            
            // Days of the month
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const isToday = today.getFullYear() === currentYear && today.getMonth() === currentMonth && today.getDate() === day;
                const isSelected = selectedDates.includes(dateStr);
                const isPast = new Date(currentYear, currentMonth, day) < new Date(today.getFullYear(), today.getMonth(), today.getDate());
                
                let classes = 'p-2 text-center cursor-pointer rounded-lg transition-colors duration-200 ';
                if (isPast) {
                    classes += 'text-gray-400 cursor-not-allowed ';
                } else if (isSelected) {
                    classes += 'bg-blue-600 text-white hover:bg-blue-700 ';
                } else if (isToday) {
                    classes += 'bg-blue-100 text-blue-600 hover:bg-blue-200 ';
                } else {
                    classes += 'hover:bg-gray-100 ';
                }
                
                const onclick = isPast ? '' : `onclick="toggleDate('${dateStr}')"`;
                calendarHTML += `<div class="${classes}" ${onclick}>${day}</div>`;
            }
            
            calendarHTML += `</div></div>`;
            calendar.innerHTML = calendarHTML;
            
            updateSelectedDatesCount();
        }

        function previousMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar();
        }

        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar();
        }

        function toggleDate(dateStr) {
            const index = selectedDates.indexOf(dateStr);
            if (index > -1) {
                selectedDates.splice(index, 1);
            } else {
                selectedDates.push(dateStr);
            }
            generateCalendar();
        }

        function updateSelectedDatesCount() {
            document.getElementById('selectedDatesCount').textContent = selectedDates.length;
        }

        // Add selected dates to appointment list
        function addSelectedDates() {
            const vaccineInput = document.getElementById('appointmentVaccine');
            
            const vaccine = vaccineInput.value;
            
            if (selectedDates.length === 0) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢');
                return;
            }
            
            if (!vaccine) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤');
                return;
            }
            
            selectedDates.forEach(date => {
                const appointmentData = {
                    date: date,
                    vaccine: vaccine
                };
                appointmentDatesArray.push(appointmentData);
            });
            
            updateAppointmentDatesDisplay();
            
            // Clear selections
            selectedDates = [];
            vaccineInput.value = '';
            generateCalendar();
        }

        function updateAppointmentDatesDisplay() {
            const container = document.getElementById('appointmentDates');
            container.innerHTML = '';
            
            appointmentDatesArray.forEach((appointmentData, index) => {
                const dateDiv = document.createElement('div');
                dateDiv.className = 'flex items-center space-x-4 p-4 bg-green-50 rounded-lg border border-green-200';
                dateDiv.innerHTML = `
                    <div class="flex-1">
                        <p class="font-medium text-green-800">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î: ${formatThaiDate(appointmentData.date)}</p>
                        <p class="text-sm text-green-600">‡∏¢‡∏≤: ${appointmentData.vaccine}</p>
                    </div>
                    <button onclick="removeAppointmentDate(${index})" class="bg-red-500 text-white px-3 py-2 rounded-lg hover:bg-red-600 transition duration-200">
                        ‡∏•‡∏ö
                    </button>
                `;
                container.appendChild(dateDiv);
            });
        }

        function removeAppointmentDate(index) {
            appointmentDatesArray.splice(index, 1);
            updateAppointmentDatesDisplay();
        }

        // Appointment form submission
        document.getElementById('appointmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                nationalId: document.getElementById('appointmentNationalId').value,
                phone: document.getElementById('appointmentPhone').value,
                firstName: document.getElementById('appointmentFirstName').value,
                lastName: document.getElementById('appointmentLastName').value,
                appointments: appointmentDatesArray
            };
            
            // Save to Google Sheets
            saveAppointmentToGoogleSheets(formData);
        });

        // Save appointment data to Google Sheets
        async function saveAppointmentToGoogleSheets(formData) {
            const submitButton = document.querySelector('#appointmentForm button[type="submit"]');
            const originalText = submitButton.textContent;
            
            // Show loading state
            submitButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...';
            submitButton.disabled = true;
            
            try {
                // Store appointment data locally for search functionality
                if (!window.registeredAppointments) {
                    window.registeredAppointments = [];
                }
                
                // Add to local storage
                const appointmentRecord = {
                    nationalId: formData.nationalId,
                    firstName: formData.firstName,
                    lastName: formData.lastName,
                    phone: formData.phone,
                    appointments: formData.appointments,
                    timestamp: new Date().toLocaleString('th-TH'),
                    createdBy: currentUserRole
                };
                
                window.registeredAppointments.push(appointmentRecord);
                
                // Prepare data for each appointment date
                const appointments = formData.appointments.map(appointment => ({
                    timestamp: new Date().toLocaleString('th-TH'),
                    nationalId: formData.nationalId,
                    firstName: formData.firstName,
                    lastName: formData.lastName,
                    phone: formData.phone,
                    appointmentDate: formatThaiDate(appointment.date),
                    vaccine: appointment.vaccine,
                    status: '‡∏£‡∏≠‡∏ô‡∏±‡∏î',
                    createdBy: currentUserRole
                }));
                
                // Google Apps Script Web App URL
                const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxCzjoYm1x4x9O8HYUW5yDsYqjuJwamw-v-sKiN1Vp_KHL3ckLYIxdEklZGNV7U-rEr/exec';
                
                for (const appointment of appointments) {
                    const response = await fetch(GOOGLE_SCRIPT_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'text/plain',
                        },
                        body: JSON.stringify({
                            action: 'saveAppointment',
                            data: appointment
                        })
                    });
                    
                    // Log response for debugging
                    console.log('Response status:', response.status);
                }
                
                // Success message
                alert(`‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!\n\nüìã ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:\n‚Ä¢ ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢: ${formData.firstName} ${formData.lastName}\n‚Ä¢ ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${formData.phone}\n‚Ä¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏î: ${appointments.length} ‡∏ß‡∏±‡∏ô\n\nüíæ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö "‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢"`);
                
                // Reset form
                document.getElementById('appointmentForm').reset();
                appointmentDatesArray = [];
                updateAppointmentDatesDisplay();
                
            } catch (error) {
                console.error('Error saving to Google Sheets:', error);
                alert('‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•\n\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö');
            } finally {
                // Reset button state
                submitButton.textContent = originalText;
                submitButton.disabled = false;
            }
        }

        // Register form submission
        // Register form submission
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                firstName: document.getElementById('firstName').value.trim(),
                lastName: document.getElementById('lastName').value.trim(),
                phone: document.getElementById('phone').value.trim(),
                nationalId: document.getElementById('nationalId').value.trim(),
                hospital: document.getElementById('hospital').value,
                vaccineDates: vaccineDatesArray
            };
            
            // Validate required fields
            if (!formData.firstName || !formData.lastName || !formData.phone || !formData.nationalId || !formData.hospital) {
                alert('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            
            if (vaccineDatesArray.length === 0) {
                alert('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏â‡∏µ‡∏î‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                return;
            }
            
            // Save to Google Sheets
            savePatientToGoogleSheets(formData);
        });

        // Save patient data to Google Sheets
        async function savePatientToGoogleSheets(formData) {
            const submitButton = document.querySelector('#registerForm button[type="submit"]');
            const originalText = submitButton.textContent;
            
            // Show loading state
            submitButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...';
            submitButton.disabled = true;
            
            try {
                // Prepare data for each vaccine date
                const vaccineRecords = formData.vaccineDates.map(vaccine => ({
                    timestamp: new Date().toLocaleString('th-TH'),
                    nationalId: formData.nationalId,
                    firstName: formData.firstName,
                    lastName: formData.lastName,
                    phone: formData.phone,
                    hospital: formData.hospital,
                    vaccineDate: formatThaiDate(vaccine.date), // Use formatted Thai date
                    vaccineName: vaccine.vaccine,
                    injectionSite: vaccine.site,
                    status: '‡∏â‡∏µ‡∏î‡πÅ‡∏•‡πâ‡∏ß', // Status for this form is always '‡∏â‡∏µ‡∏î‡πÅ‡∏•‡πâ‡∏ß'
                    createdBy: currentUserRole
                }));
                
                // Google Apps Script Web App URL from your existing code
                const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxCzjoYm1x4x9O8HYUW5yDsYqjuJwamw-v-sKiN1Vp_KHL3ckLYIxdEklZGNV7U-rEr/exec';
                
                for (const record of vaccineRecords) {
                    const response = await fetch(GOOGLE_SCRIPT_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'text/plain',
                        },
                        body: JSON.stringify({
                            action: 'savePatient', // Action for patient registration
                            data: record
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    console.log('Patient save response:', await response.json());
                }
                
                // Success message
                alert(`‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!\n\nüìã ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:\n‚Ä¢ ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢: ${formData.firstName} ${formData.lastName}\n‚Ä¢ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà: ${formData.hospital}\n‚Ä¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏â‡∏µ‡∏î: ${vaccineRecords.length} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á\n\nüíæ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Google Sheets ‡πÅ‡∏•‡πâ‡∏ß`);
                
                // Reset form
                document.getElementById('registerForm').reset();
                vaccineDatesArray = [];
                updateVaccineDatesDisplay();
                
            } catch (error) {
                console.error('Error saving patient to Google Sheets:', error);
                alert('‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•\n\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö');
            } finally {
                // Reset button state
                submitButton.textContent = originalText;
                submitButton.disabled = false;
            }
        }


        // Format phone number input
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 3 && value.length <= 6) {
                value = value.replace(/(\d{3})(\d+)/, '$1-$2');
            } else if (value.length > 6) {
                value = value.replace(/(\d{3})(\d{3})(\d+)/, '$1-$2-$3');
            }
            e.target.value = value;
        });

        // Format national ID input
        document.getElementById('nationalId').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            e.target.value = value;
        });

        document.getElementById('searchId').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            e.target.value = value;
        });

        // Format appointment phone number input
        document.getElementById('appointmentPhone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 3 && value.length <= 6) {
                value = value.replace(/(\d{3})(\d+)/, '$1-$2');
            } else if (value.length > 6) {
                value = value.replace(/(\d{3})(\d{3})(\d+)/, '$1-$2-$3');
            }
            e.target.value = value;
        });

        // Format appointment national ID input
        document.getElementById('appointmentNationalId').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            e.target.value = value;
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96d03cb227b975d8',t:'MTc1NDgzNjcwOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>












